
<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="/assets/favicon.png" />

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your Memories | SmritiKosha</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'sans-serif'] },
          animation: {
            fadeInUp: 'fadeInUp 0.3s ease-out both',
          },
          keyframes: {
            fadeInUp: {
              '0%': { opacity: '0', transform: 'translateY(10px) scale(0.95)' },
              '100%': { opacity: '1', transform: 'translateY(0) scale(1)' },
            },
          },
        },
      },
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css" />
  <style>
    /* Loading Spinner */
    #loading-spinner {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 50;
      display: none;
    }
  
    .loader {
      border: 4px solid #f3f3f3; /* Light grey */
      border-top: 4px solid #3498db; /* Blue */
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 2s linear infinite;
    }
  
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  
  
  
</head>
<body class="bg-gradient-to-br from-white to-blue-100 font-sans text-gray-800 min-h-screen p-6">
  <div id="global-logo"></div>
  <script>
    fetch('/components/logo.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('global-logo').innerHTML = html;
      });
  </script>
  
  <div class="max-w-5xl mx-auto space-y-8">
    
    <!-- Header -->
    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">
      <h1 class="text-3xl font-bold text-indigo-700">Your Memories</h1>
      <div class="flex items-center gap-3">
        <button id="add-memory-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
          + Add Memory
        </button>
        <div class="relative">
          <button id="profile-btn" class="flex items-center gap-2 px-4 py-2 bg-white text-indigo-700 rounded-lg shadow hover:bg-indigo-100 text-sm">
            <i class="fas fa-user-circle text-xl"></i>
            <span class="hidden sm:inline">Profile</span>
          </button>
          <div id="profile-menu" class="absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg py-2 hidden z-50">
            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
            <button id="logout-btn" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-100">Logout</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Memory Grid -->
    <div id="memory-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    
  </div>
  <div id="map-feature-card" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40 hidden w-[90%] max-w-md">
    <a href="/map.html" class="block bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-5 rounded-2xl shadow-2xl hover:shadow-xl transition duration-300">
      <div class="flex items-center gap-4">
        <div class="text-3xl">
          <i class="fas fa-map-marked-alt"></i>
        </div>
        
        <div>
          <h2 class="text-lg font-semibold">Explore Memories on a Map</h2>
          <p class="text-sm opacity-90">Visualize your memories by location â€” immersive, premium, and delightful.</p>
        </div>
      </div>
    </a>
  </div>
  <!-- Loading Spinner inside the Modal -->
<div id="loading-spinner" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="loader"></div>
</div>

  
  <!-- Memory Modal -->
  <div id="memory-modal" class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-lg animate-fadeInUp">
      <h3 class="text-xl font-semibold text-indigo-700 mb-4">Add a Memory</h3>
      <!-- Inside the #memory-modal div, below the description textarea -->

      <input type="hidden" id="memory-id" />

      <form id="memory-form" class="space-y-4">
        <div>
          <label class="block text-sm font-medium">Memory Title <span class="text-red-500">*</span></label>
          <input type="text" id="memory-title" maxlength="50" required class="w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:outline-none" />
        </div>
        <div>
          <label class="block text-sm font-medium">Location</label>
          <input type="text" id="memory-location" maxlength="30" class="w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:outline-none" />
        </div>
        <div>
          <label class="block text-sm font-medium">Tags</label>
          <input type="text" id="memory-tags" placeholder="vacation family summer" class="w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:outline-none" />
        </div>
        <div>
          <label class="block text-sm font-medium">Description</label>
          <textarea id="memory-description" rows="3" class="w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:outline-none"></textarea>
        </div>
        <div class="flex justify-end gap-3 pt-2">
          <button type="button" onclick="closeMemoryModal()" class="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400">Cancel</button>
          <button type="submit" id="memory-submit-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">Create</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Image Upload Modal -->
  <div id="image-upload-modal" class="fixed inset-0 bg-black bg-opacity-40 hidden flex items-center justify-center z-50">
   
    <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-lg animate-fadeInUp">
      <h3 class="text-xl font-semibold text-indigo-700 mb-4">Add Image to Memory</h3>
      <form id="image-form" class="space-y-4">
        <div>
          <label class="block text-sm font-medium">Upload Image <span class="text-red-500">*</span></label>
          <input type="file" id="upload-image" accept="image/*" required class="w-full" />
        </div>
        <div class="relative">
          <label class="block text-sm font-medium">Location</label>
          <input type="text" id="image-location" maxlength="50" class="w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:outline-none" placeholder="Search for a location..." autocomplete="off" />
          <ul id="location-suggestions" class="bg-white border border-gray-300 mt-1 rounded-md shadow-md absolute z-50 hidden max-h-60 overflow-y-auto"></ul>
        </div>
        <div>
          <label class="block text-sm font-medium">Tags</label>
          <input type="text" id="image-tags" placeholder="sunset beach" class="w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:outline-none" />
        </div>
        <div>
          <label class="block text-sm font-medium">Description</label>
          <textarea id="image-description" rows="3" class="w-full px-3 py-2 border rounded-md focus:ring-indigo-500 focus:outline-none"></textarea>
          <label for="image-capture-date" class="block text-sm font-medium text-gray-700 flex items-center gap-2">
            Capture Date
            <span class="relative group cursor-pointer">
              <i class="fas fa-info-circle text-gray-400 hover:text-indigo-600"></i>
              <div class="absolute left-6 top-1 z-10 hidden group-hover:block w-64 bg-white text-xs text-gray-700 border border-gray-300 p-2 rounded shadow-md">
                This date is extracted from the image metadata. If not available, today's date is used. You can manually edit it.
              </div>
            </span>
          </label>
          <input 
            type="date" 
            id="image-capture-date" 
            name="image-capture-date" 
            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm" 
            max="" />
          <small class="text-xs text-gray-500 mt-1 block">You can adjust the date if needed.</small>
          
          
        </div>
        <div class="flex justify-end gap-3 pt-2">
          <button type="button" onclick="closeImageUpload()" class="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400">Cancel</button>
          <button type="submit" id="image-submit-btn" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">Upload</button>
        </div>
      </form>
    </div>
  </div>



 <!-- Image Modal -->
<div id="image-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
  <div class="relative w-full max-w-6xl max-h-[90vh] flex flex-col md:flex-row bg-white p-6 rounded-lg shadow-lg mx-4 md:mx-auto gap-6">

    <!-- Left arrow -->
    <button id="modal-prev" class="absolute left-6 top-1/2 -translate-y-1/2 text-white text-3xl font-bold bg-black/50 hover:bg-black/70 rounded-full w-12 h-12 flex items-center justify-center z-50 shadow-lg backdrop-blur">
      &#10094;
    </button>

    <!-- Close button -->
    <button onclick="closeImageModal()" id="modal-close" class="absolute top-6 right-6 text-white text-2xl font-bold bg-black/50 hover:bg-red-600 rounded-full w-10 h-10 flex items-center justify-center z-50 shadow-lg backdrop-blur">
      &times;
    </button>

    <!-- Right arrow -->
    <button id="modal-next" class="absolute right-6 top-1/2 -translate-y-1/2 text-white text-3xl font-bold bg-black/50 hover:bg-black/70 rounded-full w-12 h-12 flex items-center justify-center z-50 shadow-lg backdrop-blur">
      &#10095;
    </button>

    <!-- Image and location -->
    <div class="flex flex-col items-center justify-center w-full md:w-2/3">
      <img id="modal-image" src="" class="max-h-[70vh] w-full object-contain rounded-lg shadow" />
      <p id="modal-location" class="text-sm text-indigo-600 font-medium mt-4 text-center"></p>
    </div>

    <!-- Description panel -->
    <div id="modal-info-panel" class="bg-white text-gray-800 p-4 rounded-lg shadow w-full md:w-1/3 self-center hidden">
      <p id="modal-description" class="text-sm leading-relaxed whitespace-pre-line break-words"></p>
    </div>

  </div>
</div>





  <!-- Toast -->
  <div id="toast" class="fixed bottom-4 right-4 bg-indigo-600 text-white px-4 py-2 rounded-lg shadow-lg opacity-0 pointer-events-none transition duration-300 z-50"></div>

  <script type="module" src="/src/pages/main.js"></script>
  <!-- Custom Confirm Dialog -->
<div id="confirm-dialog" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
  <div class="bg-white rounded-xl p-6 shadow-xl w-full max-w-sm animate-fadeInUp">
    <p id="confirm-message" class="text-gray-800 text-base mb-4">Are you sure?</p>
    <div class="flex justify-end gap-3">
      <button id="confirm-cancel" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">Cancel</button>
      <button id="confirm-ok" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Yes, Delete</button>
    </div>
  </div>
</div>

</body>
</html>